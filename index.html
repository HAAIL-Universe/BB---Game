<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tilt Platform Runner</title>
  <!-- Lock viewport to 1:1 scaling and avoid zooming -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <!-- PWA manifest (enables install + orientation lock) -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#000000" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #050814;
      color: #e0ecff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    /* Canvas always fills the window; we treat game as landscape in JS. */
    #gameCanvas {
      display: block;
      width: 100vw;
      height: 100vh;
    }

    /* Overlays sit above the canvas */

    /* Start / game-over overlay */
    #overlay {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, rgba(40,120,255,0.25), transparent),
                  radial-gradient(circle at bottom, rgba(255,120,40,0.25), #050814);
      padding: 20px;
      text-align: center;
      z-index: 10;
    }
    #overlay h1 {
      font-size: 1.6rem;
      margin-bottom: 0.75rem;
      letter-spacing: 0.03em;
    }
    #overlay p {
      font-size: 0.95rem;
      line-height: 1.4;
      max-width: 460px;
      margin-bottom: 0.75rem;
      opacity: 0.9;
    }
    #btnStart {
      margin-top: 0.5rem;
      padding: 0.7rem 1.8rem;
      border-radius: 999px;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      background: linear-gradient(135deg, #24c6dc, #514a9d);
      color: #f8fbff;
      box-shadow: 0 6px 16px rgba(0,0,0,0.5);
      cursor: pointer;
    }
    #btnStart:active {
      transform: translateY(1px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.6);
    }
    #status {
      font-size: 0.8rem;
      margin-top: 0.75rem;
      opacity: 0.8;
    }

    /* Simple HUD in top-left corner */
    #hud {
      position: fixed;
      top: 8px;
      left: 8px;
      padding: 6px 10px;
      background: rgba(3, 8, 16, 0.72);
      border-radius: 8px;
      border: 1px solid rgba(120,150,220,0.45);
      font-size: 0.75rem;
      line-height: 1.3;
      pointer-events: none;
      z-index: 5;
    }
    #hud span.label {
      opacity: 0.65;
    }

    /* Rotate overlay: "force" horizontal by nagging the user */
    #rotateOverlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9);
      display: none;          /* toggled via JS */
      align-items: center;
      justify-content: center;
      z-index: 20;
      color: #e5edff;
      text-align: center;
      padding: 20px;
    }
    #rotateOverlay .box {
      max-width: 360px;
      border-radius: 16px;
      padding: 16px 20px 14px;
      border: 1px solid rgba(148, 163, 233, 0.5);
      background: radial-gradient(circle at top, rgba(56,189,248,0.18), rgba(15,23,42,0.96));
      box-shadow: 0 16px 40px rgba(0,0,0,0.75);
    }
    #rotateOverlay h2 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }
    #rotateOverlay p {
      font-size: 0.9rem;
      opacity: 0.85;
    }
  </style>
</head>
<body>
  <!-- Main game canvas -->
  <canvas id="gameCanvas"></canvas>

  <!-- HUD for debug + score -->
  <div id="hud">
    <div>
      <span class="label">Tilt X:</span>
      <span id="hudTiltX">0</span>
    </div>
    <div>
      <span class="label">Angle:</span>
      <span id="hudAngle">0°</span>
    </div>
    <div>
      <span class="label">Distance:</span>
      <span id="hudDistance">0</span> m
    </div>
  </div>

  <!-- Start / game-over overlay -->
  <div id="overlay">
    <h1>Tilt Platform Runner</h1>
    <p>
      Hold your phone <strong>sideways (landscape)</strong>.
      Tilt it left and right to rotate the platforms.
      The ball rolls because of gravity — stay on the platforms and travel as far as you can.
    </p>
    <p>
      Tap start, grant motion permission if your phone asks, then tilt to play.
    </p>
    <button id="btnStart">Tap to Start</button>
    <p id="status">Waiting to start…</p>
  </div>

  <!-- Orientation nag overlay for portrait mode -->
  <div id="rotateOverlay">
    <div class="box">
      <h2>Rotate your device</h2>
      <p>
        This game is meant for <strong>landscape</strong> (phone sideways).  
        Rotate your device to continue.
      </p>
    </div>
  </div>

  <!-- Matter.js physics engine (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <!-- Your game code -->
  <script src="game.js"></script>
  <script>
  if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
  }
  </script>
</body>
</html>
